<!DOCTYPE html>
<html>
	<head>
	    <title> History </title>



	    <!-- Database Setup -->
		<script src="https://www.gstatic.com/firebasejs/3.6.4/firebase.js"></script>
		<script>

			// MARK: Firebase Initialization
			var config = {
				apiKey: "AIzaSyB2Joljxr_Veu5psV2SdGLhvsqJf6DFTlE",
				authDomain: "tradetracking-66f5a.firebaseapp.com",
				databaseURL: "https://tradetracking-66f5a.firebaseio.com",
				storageBucket: "tradetracking-66f5a.appspot.com",
				messagingSenderId: "1069435222179"
			};
			firebase.initializeApp(config);

			// Get a reference to the database service
			var database = firebase.database();




			// MARK: my functions
			function saveTrade(trade, tid) {
				database.ref('Closed Trades/' + tid).set(trade);
			}





			// MARK: Load Trades Into Table
			var ref = firebase.database().ref('Closed Trades/');
			ref.on('value', function(snapshot) {


				// Find a <table> element with id="TradeTable":
				var table = document.getElementById("TradeTable");
				
				// Create table header
				var header = table.createTHead();		//
				var row = header.insertRow(0);     		//
				var j = 0;								// j column index
				for(var cat in 	snapshot.val()[1]){
					var cell = row.insertCell(j++);
					cell.innerHTML = cat.bold();
				}


				// Populate Table with trade info
				// (loop through trades)
				var k = 1;								// row index: j
				for(var i in snapshot.val()){
					
					var trade = snapshot.val()[i];  	// trade id: i
					var row   = table.insertRow(k++);	// Create the kth empty row, add it to the table:

					// Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
					var j = 0;
					for(var cat in trade){
						var cell = row.insertCell(j++);
						cell.innerHTML = trade[cat];
					}
				}
			});	
            



		</script>

		


		<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-database.js"></script>

		<!-- Leave out Storage -->
		<!-- <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-storage.js"></script> -->

	</head>
	<body>

		<!-- MARK: Page Setup -->
		<h1>Closed Trades</h1>
		<br>
		<a href="home.html"> Home </a>
		<br><br>
		<table style='width:75%' border = '1' id="TradeTable"></table>






		<!-- MAIN -->
        <script type="text/javascript">










        	// MARK: Trade bank
			var condor1 = {Stock: 'SPY',
						   Quantity: -20,
						   "Long Put": 218,
						   "Short Put": 220,
						   "Short Call": 232,
						   "Long Call": 234,
						   Underlying: 224,
						   Maturity: "Jan-20-17",
						   "Opening Price": -.48,
						   "Closing Price": -.35,
						   PnL: 260
						};
			var condor2 = {Stock: 'RUT',
						   Quantity: -5,
						   "Long Put": 1240,
						   "Short Put": 1260,
						   "Short Call": 1460,
						   "Long Call": 1480,
						   Underlying: 1360,
						   Maturity: "Feb-17-17",
						   "Opening Price": -3.65,
						   "Closing Price": -3.70,
						   PnL: -20
						};

			saveTrade(condor1,1);
			saveTrade(condor2,2);


        </script>
		

	</body>
</html>







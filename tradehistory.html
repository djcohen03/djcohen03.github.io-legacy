<!DOCTYPE html>
<html>
	<head>
	    <title> History </title>



	    <!-- Database Setup -->
		<script src="https://www.gstatic.com/firebasejs/3.6.4/firebase.js"></script>
		<script>
			// Initialize Firebase
			var config = {
				apiKey: "AIzaSyB2Joljxr_Veu5psV2SdGLhvsqJf6DFTlE",
				authDomain: "tradetracking-66f5a.firebaseapp.com",
				databaseURL: "https://tradetracking-66f5a.firebaseio.com",
				storageBucket: "tradetracking-66f5a.appspot.com",
				messagingSenderId: "1069435222179"
			};
			firebase.initializeApp(config);

			// Get a reference to the database service
			var database = firebase.database();


			function writeUserData(userId, name, email) {
				database.ref('users/' + userId).set({
					Name: name,
					Email: email,
					Username: userId
				});
			}
			

			function printAllUsers(){
				console.log("aaaaa");
				var ref = firebase.database().ref("users/djcohen");
				console.log("bbbbb");
				ref.once("value").then(function(snapshot) {
				    var name = snapshot.child("Name").val(); // {first:"Ada",last:"Lovelace"}
				    document.write("<br><br><p>" + name + "</p>");
				});

				
			}

		</script>

		


		<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-database.js"></script>

		<!-- Leave out Storage -->
		<!-- <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-storage.js"></script> -->


        <script type="text/javascript">

            function printTable(trades){
            	var n = trades.length;
            	document.write("<table style='width:50%' border = '1'>")
            	
				// get column names
				if(n > 0){
					var columns = [];
            		for(var key in trades[0]) columns.push(key);
				} else {
					return
				}
            	// write header
				var headstr = "<tr>";
				for(var i = 0; i < columns.length; i++){
					headstr += "<th><b>" + columns[i] + "</b></th>";
				}
				headstr += "</tr>";
            	document.write(headstr);

            	// write rows
            	var rowstr = "";
            	for(i = 0; i < n; i ++){
					rowstr = "<tr>";
					for(var j = 0; j < columns.length; j++){
						rowstr += "<td>" + trades[i][columns[j]] + "</td>";
					}
					rowstr += "</tr>";
		        	document.write(rowstr);
            	}
            	document.write("</table>");
            }

		</script>


	</head>
	<body>
		<h1>History</h1>
		<br>

		<a href="home.html"> Home </a>
		<br><br>






        <script type="text/javascript">
        	var trade1 = { Stock: 'SPY',  Price: '223.56',  "Open Date": "10/1/16",  "Close Date": "11/1/16" };
        	var trade2 = { Stock: 'RUT',  Price: '1873.56', "Open Date": "11/1/16" , "Close Date": "12/1/16"};
        	var trade3 = { Stock: 'NVDA', Price: '33.56',   "Open Date": "12/1/16",  "Close Date": "1/1/17" };
            printTable([trade1,trade2,trade3])

            printAllUsers()
            writeUserData("djcohen", "David", "djcohen@foo.org");
            writeUserData("jjnorac", "John", "jjnorac@foo.org");
            writeUserData("katdawg", "Katherine", "katdawg@foo.org");
            
        </script>
		








		<!-- scripts -->

		<script type="text/javascript">
			var myVariable = 'Hello';
			// window.alert(myVariable);
		</script>


	</body>
</html>






